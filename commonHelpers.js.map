{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default renderImages;\nimport {loader, gallery, imageList, searchInput, loadMoreBtn} from \"/main.js\"\nfunction renderImages(images) {\n    const markup = images.hits\n    .map((image) => {\n        return `\n            <li class=\"list-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <ul class=\"stats-list\">\n                <li class=\"stats-list-item\">\n                    <p class=\"stats\">Likes</p>\n                    <p class=\"stats-info\">${image.likes}</p>\n                </li>\n                <li class=\"stats-list-item\">\n                    <p class=\"stats\">Views</p>\n                    <p class=\"stats-info\">${image.views}</p>\n                </li>\n                <li class=\"stats-list-item\">\n                    <p class=\"stats\">Comments</p>\n                    <p class=\"stats-info\">${image.comments}</p>\n                </li>\n                <li class=\"stats-list-item\">\n                    <p class=\"stats\">Downloads</p>\n                    <p class=\"stats-info\">${image.downloads}</p>\n                </li>\n            </ul>\n            </li>\n        `\n    })\n    .join(\"\");\n    loader.classList.add(\"hidden\");\n    imageList.insertAdjacentHTML(\"beforeend\", markup);\n    gallery.refresh()\n    searchInput.value = \"\";\n}\n","export default fetchImages;\nimport {searchParams, baseURL, axios, } from \"/main.js\"\nasync function fetchImages() {\n        const response = await axios.get(baseURL + searchParams.toString());\n        return response.data;\n}\n","export {axios, searchParams, baseURL, loader, gallery, imageList, searchInput, loadMoreBtn};\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\nimport renderImages from \"./js/render-functions\"\nimport fetchImages from \"./js/pixabay-api\";\n\n//* Оголошення ДОМ констант\nconst searchInput = document.querySelector(\"#search-input\");\nconst searchForm = document.querySelector(\".form\");\nconst imageList = document.querySelector(\".image-list\")\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\n\n\n//* Оголошення глобальних змінних\nconst baseURL = `https://pixabay.com/api/?`;\nlet searchParams = {}\nlet page = 0;\nlet perPage = 15;\nlet totalImages;\nlet totalPages;\nlet searchWord;\n\nlet galleryCard;\nlet cardInfo;\n//* Оновлення параметрів запиту\nfunction addSearchParams() {\n    page += 1;\n    return new URLSearchParams({\n        key: `42308406-6cac9d7b9797eefd79d1793c9`,\n        q: encodeURIComponent(searchWord),\n        page: page,\n        per_page: perPage,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n    })\n}\n//* Оголошення Сімпл лайт бокс\nlet gallery = new SimpleLightbox(`.image-list a`,\n    {\n        captionsData: `alt`,\n        captionDelay: 250,\n    }); \n    gallery.on('show.simplelightbox', function () {\n        gallery.enableKeyboard;\n    });\n//* Виконання пошуку запиту та рендер\nsearchForm.addEventListener(\"submit\", (event) => {\n    event.preventDefault()\n    //*Перевірка на пустий результат\n    if(searchInput.value.trim() === \"\"){\n        return iziToast.error({\n            message: \"Input should't be blank!\",\n            position: `topRight`,\n        });\n    }\n    else{\n        page = 0;\n        searchWord = searchInput.value.trim();\n        loader.classList.remove(\"hidden\");\n        searchParams = addSearchParams();\n    };\n    //*Пошук запиту\n    fetchImages()\n    .then((images) => {\n        if(Object.keys(images.hits).length !== 0){\n            imageList.innerHTML = \"\";\n            totalImages = images.totalHits;\n            renderImages(images)\n            searchParams = addSearchParams();\n            totalPages = Math.floor(totalImages / perPage);\n            if(totalPages > 1){\n                loadMoreBtn.classList.remove(\"hidden\");\n            }\n            galleryCard = document.querySelector(\".list-item\");\n            cardInfo = galleryCard.getBoundingClientRect();\n        }\n        else {\n            loader.classList.add(\"hidden\");\n            imageList.innerHTML = \"\";\n            searchInput.value = \"\";\n            return iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: `topRight`,\n            });\n        }\n        })\n    .catch((error) => console.log(error));\n})\n\n\n//* Пошук додаткових зображень\nloadMoreBtn.addEventListener(\"click\", () => {\n    if (page == totalPages){\n        loader.classList.remove(\"hidden\");\n        fetchImages()\n        .then((images) => {\n            renderImages(images)\n            searchParams = addSearchParams();\n            window.scrollBy({\n                top: Math.floor(cardInfo.height * 2),\n                behavior: \"smooth\",\n            })\n            loadMoreBtn.classList.add(\"hidden\");\n            return iziToast.info({\n                position: \"topRight\",\n                message: \"We're sorry, but you've reached the end of search results.\"\n                \n            });\n        })\n        .catch((error) => console.log(error));\n    }\n    else {\n        loader.classList.remove(\"hidden\");\n        fetchImages()\n        .then((images) => {\n            renderImages(images)\n            searchParams = addSearchParams();\n            window.scrollBy({\n                top: Math.floor(cardInfo.height * 2),\n                behavior: \"smooth\",\n            })\n        })\n        .catch((error) => console.log(error));\n    }\n})\n\n"],"names":["renderImages","images","markup","image","loader","imageList","gallery","searchInput","fetchImages","axios","baseURL","searchParams","searchForm","loadMoreBtn","page","perPage","totalImages","totalPages","searchWord","galleryCard","cardInfo","addSearchParams","SimpleLightbox","event","iziToast","error"],"mappings":"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"}